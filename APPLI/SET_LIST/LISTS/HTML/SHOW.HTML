<!--<!DOCTYPE html>-->
<!--<html>-->

<div class="container">
    
    <div class="container">
    <div class="fixed gray-trans-over">

        <!--Header Info-->
        <div class="row">
            <label class="control-label col-sm-1">
                <h3><i class="glyphicon glyphicon-info-sign"></i></h3>
            </label>
            <div class="col-sm-6 lbl-header-info">
                <span id="info-msg" class="label label-lg label-###INFO_LV###">
                    ###INFO_MSG###
                </span>
            </div>
        </div>

        <!--Set Category Filter-->
        <div class="row">
            <form action="/APP/SET_LIST/LISTS/SHOW" method="GET">    

                <div class="form-group">
                    <div class="btn-group">
                        
                        <!--Set Category Dropdown list-->
                        <div class="btn-group">
                            <button type="submit" class="btn btn-info dropdown-toggle" data-toggle="dropdown" id="set_category" aria-expended="false">
                                &nbsp<span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu SET" role="menu" name="PAGE">
                               <li name="CATEGORY_PAGE">
                                   <a class="category-list" id="cat_list_0" >ALL</a>
                               </li>
                               ###SET_CATEGORY###
                            </ul>
                        </div>
                        <div class="btn-group">
                            <input type="text" name="CATEGORY_NM_PAGE" id="CATEGORY_NM_PAGE" value="" class="form-control" disabled />
                        </div>

                        <!--Search Submit button-->
                        <div class="btn-group">
                            <button type="submit" class="btn btn-info" />
                                <span clss="glyphicon glyphicon-eye-open">Search</span>
                            </button>
                        </div>
                    </div>

                    <input type="hidden" name="SET_CATEGORY_NM_HID_PAGE" id="SET_CATEGORY_NM_HID_PAGE" value="###SET_CATEGORY_NM_PAGE###" class="form-control" />
                    <input type="hidden" name="SET_CATEGORY_NO_HID_PAGE" id="SET_CATEGORY_NO_HID_PAGE" value="###SET_CATEGORY_NO_PAGE###" class="form-control" />
                    <input type="hidden" name="SEARCH" id="SEARCH" value="1" class="form-control" />
                    <input type="hidden" name="page" id="page" value="1" class="form-control" />
                </div>

                <!--Spacer-->
                <div class="col-sm-1 hidden-xs"></div>
            </form>
        </div>
        </div>
    </div>

    <!--Spacer-->
    <div class="header-dummy" style="height:9.0em; background-color:piink;"></div>

    <!--Contents Records/Pagination-->
    <div class="header-under-contents">
        <form name="form_set_list" class="form-inline form-horizontal"  action="" method="">
	          <input type="hidden" name="SET_CATEGORY_NO_HID_EDIT" id="SET_CATEGORY_NO_HID_EDIT" value="" class="form-control input-sm" />
	          <input type="hidden" name="SET_NO_HID_EDIT" id="SET_NO_HID_EDIT" value="" class="form-control input-sm" />
  
            <div class="contents-table">
                ###TABLE###
            </div>

            <div id="pager" class="pagination-foot">
                ###PAGER###
            </div>
        </form>
    </div>
</div>

<script>

    $(document).ready(function() {
        $("#pager").sticky({topSpacing:0});
    });

    //NEWボタン
    $(document).on('click', 'a.btn-set-new', function() {

        //イベント基本情報
        var idname = $(this).attr("id"); 
        var list_id = idname.split("_");
        var action = list_id[1];
        var set_no = list_id[2];
        var frm = document.forms['form_set_list'];
        frm.method = 'GET';
        frm.action = '/APP/SET_LIST/NEW/SET/INPUT';
        frm.submit();
    });

    //EDITボタン
    $(document).on('click', 'a.btn-set-edit', function() {

        //イベント基本情報
        var idname = $(this).attr("id"); 
        var list_id = idname.split("_");
        var action = list_id[1];
        var set_no = list_id[2];
        var cat_no = $('#SET_CATEGORY_NO_HID_' + set_no).val(); 
        var frm = document.forms['form_set_list'];

        //パラメータを設定
        $('#SET_CATEGORY_NO_HID_EDIT').val(cat_no); 
        $('#SET_NO_HID_EDIT').val(set_no); 

        //submit
        frm.method = 'GET';
        frm.action = '/APP/SET_LIST/EDIT/SET/INPUT';
        frm.submit();
    });

    //DELETEボタン
    $(document).on('click', 'a.btn-set-delete', function() {

        //イベント基本情報
        var idname = $(this).attr("id"); 
        var list_id = idname.split("_");
        var action = list_id[1];
        var set_no = list_id[2];
        var set_category_no = $('#SET_CATEGORY_NO_HID_' + set_no).val();
  
        //セット名を仮登録
        var jqXHR = $.ajax({
            type: 'POST',
            url: '/APP/SET_LIST/DELETE/COMPLETE',
            data: {
              SET_CATEGORY_NO: set_category_no,
              SET_NO: set_no
            }
        });
        jqXHR.done(function(data) {
            if (data == 2222) {
                alert("セット:" + set_no + "の削除に失敗しました。");
            } else {
                var sel = '#edit-row-' + set_no;
                $(sel).remove();
                alert("セット:" + set_no + "を削除しました。");
            }
        });
        jqXHR.fail(function(data) {
            alert("セット:" + set_no + "の削除に失敗しました。");
        });
    });

</script>
<!--</html>-->
