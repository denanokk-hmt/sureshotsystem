<!--<!DOCTYPE html>-->
<!--<html>-->
<div id="whole" class="container fade-in" style="opacity:0">
    
    <!--Header Info-->
    <div class="col-md-1 col-xs-1" >
        <i class="glyphicon glyphicon-info-sign"></i>
    </div>
 
    <!--Header Info-->
    <div class="col-md10 lbl-header-info">
        <span id="info-msg" class="label label-lg label-###INFO_LV###">
            ###INFO_MSG###
        </span>
    </div>
    <!--ERROR MESSAGE-->
    <div class="row">
        <div class="col-md-10 lbl-header-info">
            <div>
                <span id="SET_CATEGORY_NM_EN_ISNULL_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_EN_ISNULL###">カテゴリ名(英語)に、値がありません。</span>
            </div>
            <div>
                <span id="SET_CATEGORY_NM_EN_LENGTH_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_EN_LENGTH###">カテゴリ名(英語)は、3文字以上必要です。</span>
            </div>
            <div>
                <span id="SET_CATEGORY_NM_EN_ISEN_ISJP_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_EN_ISEN_ISJP###">カテゴリ名(英語)に、英数字以外が入力されています。</span>
            </div>
            <div>
                <span id="SET_CATEGORY_NM_EN_DUPLICATE_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_EN_DUPLICATE###">カテゴリ名(英語)は、既に使用されています。</span>
            </div>
            <div>
                <span id="SET_CATEGORY_NM_JP_ISNULL_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_JP_ISNULL###">カテゴリ名(日本語)に、値がありません。</span>
            </div>
            <div>
                <span id="SET_CATEGORY_NM_JP_LENGTH_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_JP_LENGTH###">カテゴリ名(日本語)、3文字以上必要です。</span>
            </div>
            <div>
                <span id="SET_CATEGORY_NM_JP_ISEN_ISJP_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_JP_ISEN_ISJP###">カテゴリ名(日本語)に、日本語が入力されていません。</span>
            </div>
            <div>
                <span id="SET_CATEGORY_NM_JP_DUPLICATE_MSG" class="fade-in label label-danger ###SET_CATEGORY_NM_JP_DUPLICATE###">カテゴリ名(日本語)は、既に使用されています。</span>
            </div>
        </div>
    </div>
    <br>

    <!--Spacer
    <div class="header-dummy" style="height:7.0em; background-color:piiiiink;"></div>
    -->

    <!--Contents-->
    <div class="header-under-contents">
        <form class="form-horizontal" action="" method="">
            <input type="hidden" id="ACTION" name="ACTION" value="COMPLETE" >
            <input type="hidden" id="REST" name="REST" value="" >
            <div class="contents-table">
                ###TABLE###
            </div>
        </form>
    </div>
</div>
<!--</html>-->

<script>

    //Validation Err MSGのOpacityを初期化
    $(document).ready(function(){
        validationErrMsgInit();
    });

    //ロード時に全画面をフェードイン
    $(window).on('load',function(){
        $('#whole').css("opacity","1");
    });

    //バリデーションエラーMSGの初期化
    function validationErrMsgInit() {

        //バリデーションエラー表示をクリア
        $('input[type=text]').removeClass("label-danger");
        $('.lbl-header-info .label').removeClass("show");
        $('.lbl-header-info .label').addClass("hidden");
        $('#info-msg').html("");

        //バリデーションエラーMSGをフェードアウト
        fadeInOut(0);
   }

    /*バリデーションエラーMSGをフェードアウト
    *   引数 inout
    *   フェードイン:1
    *   フェードアウト:0
    */
    function fadeInOut(inout) {
        $('.fade-in').not('#whole').each(function(){
            $(this).css("opacity",inout );
        });
    }

    //
    $('.btn').on('click', function() {
    });

    //カテゴリ名新規追加
    function newSetCategory() {

        //バリデーションエラーMSG初期化
        validationErrMsgInit();

        //新規登録処理
        var new_category_nm_en = $('#SET_CATEGORY_NM_EN_NEW').val(); //MSG用
        var params = $('form').serialize();
        var jqXHR = $.ajax({
            type: 'POST',
            url: '/APP/SET_CATEGORY/NEW/COMPLETE',
            data: params
        });
        jqXHR.done(function(data) {
            if (data == 2222) {
                alert(new_category_name + "は、既に使われています。");
            } else {
                $('table').html(data);
                $('#info-msg').html(new_category_name + "を追加しました。");
            }
        });
        jqXHR.fail(function(data) {
            alert("新規登録処理に失敗しました。");
        });
    }

    //カテゴリ名変更
    function editSetCategory(id) {

        if (id == 999) {
            alert("更新対象です。");
            return false;
        }

        var edit_category_name = $('#SET_CATEGORY_NAME_' + id).val();
        var params = $('form').serialize();
        var jqXHR = $.ajax({
            type: 'POST',
            url: '/APP/SET_CATEGORY/EDIT/COMPLETE',
            data: {
                SET_CATEGORY_ID: id,
                SET_CATEGORY_NAME: edit_category_name
            }
        });
        jqXHR.done(function(data) {
            if (data == 2222) {
                alert(edit_category_name + "は、既に使われています。");
            } else {
                alert(edit_category_name + "を変更しました。");
                $('#info-msg').html(edit_category_name + "を変更しました。");
            }
        });
        jqXHR.fail(function() {
            alert("更新処理に失敗しました。");
        });
    }

    //カテゴリ名削除
    function deleteSetCategory(id) {

        if (id == 999) {
            alert("削除対象外です。");
            return false;
        }

        var delete_category_name = $('#SET_CATEGORY_NAME_' + id).val();
        var params = $('form').serialize();
        var jqXHR = $.ajax({
            type: 'POST',
            url: '/APP/SET_CATEGORY/DELETE/COMPLETE',
            data: {
                SET_CATEGORY_ID: id,
                SET_CATEGORY_NAME: delete_category_name
            }
        });
        jqXHR.done(function(data) {
            if (data == 111) {
                var sel = '#edit-row-' + id;
                $(sel).remove();
                $('#info-msg').html(delete_category_name + "を削除しました。");
            } else {
                $('#info-msg').html(delete_category_name + "を削除出来ませんでした。");
            }
        });
        jqXHR.fail(function() {
            alert("削除処理に失敗しました。");
        });
 
    }

</script>
<!--</html>-->
